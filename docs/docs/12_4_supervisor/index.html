<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Anno Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Anno Blog Atom Feed"><title data-react-helmet="true">12.4 supervisoré…ç½® | Anno</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="12.4 supervisoré…ç½® | Anno"><meta data-react-helmet="true" name="description" content="ä¸€ã€supervisorç®€ä»‹"><meta data-react-helmet="true" property="og:description" content="ä¸€ã€supervisorç®€ä»‹"><meta data-react-helmet="true" property="og:url" content="https://github.com/duyanming/Anno.Core/docs/12_4_supervisor"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://github.com/duyanming/Anno.Core/docs/12_4_supervisor"><link rel="stylesheet" href="/styles.41d10026.css">
<link rel="preload" href="/styles.193400d7.js" as="script">
<link rel="preload" href="/runtime~main.fbf2007d.js" as="script">
<link rel="preload" href="/main.496252e8.js" as="script">
<link rel="preload" href="/1.72bbf40f.js" as="script">
<link rel="preload" href="/01a85c17.0d30523f.js" as="script">
<link rel="preload" href="/1be78505.11f4e639.js" as="script">
<link rel="preload" href="/6875c492.0528fb55.js" as="script">
<link rel="preload" href="/a6aa9e1f.aebdbda7.js" as="script">
<link rel="preload" href="/ccc49370.2f136fbf.js" as="script">
<link rel="preload" href="/ece76bd1.1f60f8ce.js" as="script">
<link rel="preload" href="/48.8b79852b.js" as="script">
<link rel="preload" href="/47.401ce311.js" as="script">
<link rel="preload" href="/f976f453.d6bc5f28.js" as="script">
<link rel="preload" href="/46.ac90ee45.js" as="script">
<link rel="preload" href="/6a5ff40f.8bfa284e.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="/img/logo.jpg" alt="Anno Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo.jpg" alt="Anno Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Anno</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">æ–‡æ¡£</a><a class="navbar__item navbar__link" href="/blog">åšå®¢</a></div><div class="navbar__items navbar__items--right"><a href="https://qm.qq.com/cgi-bin/qm/qr?k=6dg5yMmXtu49mPgJeLjw6ZeCozurwRsU&amp;jump_from=webapi" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">QQç¾¤:478399354</a><a href="http://81.69.19.225:8080/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">åœ¨çº¿ä½“éªŒ</a><a href="https://github.com/duyanming/Viper" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Viperé¢æ¿</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__item navbar__link">ä»“åº“</a><ul class="dropdown__menu"><li><a href="https://github.com/duyanming/Anno.Core" target="_blank" rel="noopener noreferrer" class="dropdown__link">GitHub</a></li><li><a href="https://gitee.com/dotnetchina/anno.core" target="_blank" rel="noopener noreferrer" class="dropdown__link">Gitee</a></li></ul></div><a href="http://duyanming.github.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ğŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ğŸŒ</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.jpg" alt="Anno Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo.jpg" alt="Anno Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Anno</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs">æ–‡æ¡£</a></li><li class="menu__list-item"><a class="menu__link" href="/blog">åšå®¢</a></li><li class="menu__list-item"><a href="https://qm.qq.com/cgi-bin/qm/qr?k=6dg5yMmXtu49mPgJeLjw6ZeCozurwRsU&amp;jump_from=webapi" target="_blank" rel="noopener noreferrer" class="menu__link">QQç¾¤:478399354</a></li><li class="menu__list-item"><a href="http://81.69.19.225:8080/" target="_blank" rel="noopener noreferrer" class="menu__link">åœ¨çº¿ä½“éªŒ</a></li><li class="menu__list-item"><a href="https://github.com/duyanming/Viper" target="_blank" rel="noopener noreferrer" class="menu__link">Viperé¢æ¿</a></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="menu__link menu__link--sublist">ä»“åº“</a><ul class="menu__list"><li class="menu__list-item"><a href="https://github.com/duyanming/Anno.Core" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li><li class="menu__list-item"><a href="https://gitee.com/dotnetchina/anno.core" target="_blank" rel="noopener noreferrer" class="menu__link">Gitee</a></li></ul></li><li class="menu__list-item"><a href="http://duyanming.github.io/" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">1. æ¡†æ¶ä»‹ç»</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/">1.1  Anno æ¡†æ¶æ¦‚è¿°</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/get-started">1.2 Viper é¢æ¿ç®€ä»‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/get-started1.2">1.3 é¡¹ç›®æºç ç»“æ„</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">2. æ³¨å†Œä¸­å¿ƒ</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/2_1_introduce">2.1 æ³¨å†Œä¸­å¿ƒæ¦‚è¿°</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">3. æœåŠ¡Provider</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/3_1_introduce">3.1 å¾®æœåŠ¡Service</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">4. ç½‘å…³&amp;ç›‘æ§</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/4_1_introduce">4.1 ç½‘å…³&amp;ç›‘æ§</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">5. æœåŠ¡èµ„æºç›‘æ§</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/5_1_introduce">5.1 æœåŠ¡èµ„æºç›‘æ§</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">6. é›†ç¾¤æ¥å£æ–‡æ¡£</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/6_1_introduce">6.1 é›†ç¾¤æ¥å£æ–‡æ¡£</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/6_2_introduce">6.2 é›†ç¾¤æ¥å£æ–‡æ¡£è¯¦ç»†ç”¨æ³•</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">7. Hello World</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/7_1_introduce">7.1 æ·»åŠ HelloWorldæœåŠ¡</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/7_2_introduce">7.2 ç¼–å†™ä¸€ä¸ªæ’ä»¶</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/7_3_introduce">7.3 ApiDocæ–‡æ¡£</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">8. é›†æˆJava</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/8_1_introduce">8.1 é›†æˆJava</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">9. è¿›é˜¶æŒ‡å—</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/9_1_introduce">9.1 è¿›é˜¶æŒ‡å—</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/9_2_introduce">9.2 é™æµ</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/9_3_introduce">9.3 ç¼“å­˜</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/9_4_introduce">9.4 åˆ†å¸ƒå¼é”</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/9_5_introduce">9.5 åˆ†å¸ƒäº‹åŠ¡</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">10. é¢†åŸŸé©±åŠ¨è®¾è®¡</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/10_1_introduce">10.1 é¢†åŸŸé©±åŠ¨è®¾è®¡</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">11. äº‹ä»¶æ€»çº¿</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/11_1_introduce">11.1 äº‹ä»¶æ€»çº¿</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">12. æ›´å¤š</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/12_1_introduce">12.1 Linuxå¸¸ç”¨å‘½ä»¤</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/12_2_introduce">12.2 Centos7ç«¯å£è®¾ç½®</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/12_3_nginx">12.3 nginxé…ç½®</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/12_4_supervisor">12.4 supervisoré…ç½®</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/docs/13_1_introduce">13.1 å¥½æ–‡ç« é›†åˆ</a></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">12.4 supervisoré…ç½®</h1></header><div class="markdown"><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="ä¸€ã€supervisorç®€ä»‹"></a>ä¸€ã€supervisorç®€ä»‹<a class="hash-link" href="#ä¸€ã€supervisorç®€ä»‹" title="Direct link to heading">#</a></h3><p>Supervisoræ˜¯ç”¨Pythonå¼€å‘çš„ä¸€å¥—é€šç”¨çš„è¿›ç¨‹ç®¡ç†ç¨‹åºï¼Œèƒ½å°†ä¸€ä¸ªæ™®é€šçš„å‘½ä»¤è¡Œè¿›ç¨‹å˜ä¸ºåå°daemonï¼Œå¹¶ç›‘æ§è¿›ç¨‹çŠ¶æ€ï¼Œå¼‚å¸¸é€€å‡ºæ—¶èƒ½è‡ªåŠ¨é‡å¯ã€‚å®ƒæ˜¯é€šè¿‡fork/execçš„æ–¹å¼æŠŠè¿™äº›è¢«ç®¡ç†çš„è¿›ç¨‹å½“ä½œsupervisorçš„å­è¿›ç¨‹æ¥å¯åŠ¨ï¼Œè¿™æ ·åªè¦åœ¨supervisorçš„é…ç½®æ–‡ä»¶ä¸­ï¼ŒæŠŠè¦ç®¡ç†çš„è¿›ç¨‹çš„å¯æ‰§è¡Œæ–‡ä»¶çš„è·¯å¾„å†™è¿›å»å³å¯ã€‚ä¹Ÿå®ç°å½“å­è¿›ç¨‹æŒ‚æ‰çš„æ—¶å€™ï¼Œçˆ¶è¿›ç¨‹å¯ä»¥å‡†ç¡®è·å–å­è¿›ç¨‹æŒ‚æ‰çš„ä¿¡æ¯çš„ï¼Œå¯ä»¥é€‰æ‹©æ˜¯å¦è‡ªå·±å¯åŠ¨å’ŒæŠ¥è­¦ã€‚supervisorè¿˜æä¾›äº†ä¸€ä¸ªåŠŸèƒ½ï¼Œå¯ä»¥ä¸ºsupervisordæˆ–è€…æ¯ä¸ªå­è¿›ç¨‹ï¼Œè®¾ç½®ä¸€ä¸ªérootçš„userï¼Œè¿™ä¸ªuserå°±å¯ä»¥ç®¡ç†å®ƒå¯¹åº”çš„è¿›ç¨‹ã€‚</p><p>æ³¨ï¼šæœ¬æ–‡ä»¥centos7ä¸ºä¾‹ï¼Œsupervisorç‰ˆæœ¬3.4.0ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="äºŒã€supervisorå®‰è£…"></a>äºŒã€supervisorå®‰è£…<a class="hash-link" href="#äºŒã€supervisorå®‰è£…" title="Direct link to heading">#</a></h3><p>é…ç½®å¥½yumæºåï¼Œå¯ä»¥ç›´æ¥å®‰è£…</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-shell codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">yum </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> supervisor</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Debian/Ubuntuå¯é€šè¿‡aptå®‰è£…</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-shell codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">apt-get</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> supervisor</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>pipå®‰è£…</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-shell codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">pip </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> supervisor</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>easy_installå®‰è£…</p><p>easy_install supervisor</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="ä¸‰ã€supervisorä½¿ç”¨"></a>ä¸‰ã€supervisorä½¿ç”¨<a class="hash-link" href="#ä¸‰ã€supervisorä½¿ç”¨" title="Direct link to heading">#</a></h3><p>supervisoré…ç½®æ–‡ä»¶ï¼š/etc/supervisord.conf
æ³¨ï¼šsupervisorçš„é…ç½®æ–‡ä»¶é»˜è®¤æ˜¯ä¸å…¨çš„ï¼Œä¸è¿‡åœ¨å¤§éƒ¨åˆ†é»˜è®¤çš„æƒ…å†µä¸‹ï¼Œä¸Šé¢è¯´çš„åŸºæœ¬åŠŸèƒ½å·²ç»æ»¡è¶³ã€‚</p><p>å­è¿›ç¨‹é…ç½®æ–‡ä»¶è·¯å¾„ï¼š/etc/supervisord.d/
æ³¨ï¼šé»˜è®¤å­è¿›ç¨‹é…ç½®æ–‡ä»¶ä¸ºiniæ ¼å¼ï¼Œå¯åœ¨supervisorä¸»é…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="å››ã€é…ç½®æ–‡ä»¶è¯´æ˜"></a>å››ã€é…ç½®æ–‡ä»¶è¯´æ˜<a class="hash-link" href="#å››ã€é…ç½®æ–‡ä»¶è¯´æ˜" title="Direct link to heading">#</a></h3><p>supervisor.confé…ç½®æ–‡ä»¶è¯´æ˜ï¼š</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-shell codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">unix_http_server</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">file</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">/tmp/supervisor.sock   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">UNIX socket æ–‡ä»¶ï¼Œsupervisorctl ä¼šä½¿ç”¨</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">chmod</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">0700                 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">socketæ–‡ä»¶çš„modeï¼Œé»˜è®¤æ˜¯0700</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">chown</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">nobody:nogroup       </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">socketæ–‡ä»¶çš„ownerï¼Œæ ¼å¼ï¼šuid:gid</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">inet_http_server</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">         </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">HTTPæœåŠ¡å™¨ï¼Œæä¾›webç®¡ç†ç•Œé¢</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">port</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">127.0</span><span class="token plain">.0.1:9001        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">Webç®¡ç†åå°è¿è¡Œçš„IPå’Œç«¯å£ï¼Œå¦‚æœå¼€æ”¾åˆ°å…¬ç½‘ï¼Œéœ€è¦æ³¨æ„å®‰å…¨æ€§</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">username</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">user              </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">ç™»å½•ç®¡ç†åå°çš„ç”¨æˆ·å</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">password</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">123</span><span class="token plain">               </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">ç™»å½•ç®¡ç†åå°çš„å¯†ç </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">supervisord</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">logfile</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">/tmp/supervisord.log </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">æ—¥å¿—æ–‡ä»¶ï¼Œé»˜è®¤æ˜¯ </span><span class="token variable" style="color:rgb(191, 199, 213)">$CWD</span><span class="token plain">/supervisord.log</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">logfile_maxbytes</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">50MB        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">æ—¥å¿—æ–‡ä»¶å¤§å°ï¼Œè¶…å‡ºä¼šrotateï¼Œé»˜è®¤ 50MBï¼Œå¦‚æœè®¾æˆ0ï¼Œè¡¨ç¤ºä¸é™åˆ¶å¤§å°</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">logfile_backups</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token plain">           </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">æ—¥å¿—æ–‡ä»¶ä¿ç•™å¤‡ä»½æ•°é‡é»˜è®¤10ï¼Œè®¾ä¸º0è¡¨ç¤ºä¸å¤‡ä»½</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">loglevel</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">info                </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">æ—¥å¿—çº§åˆ«ï¼Œé»˜è®¤infoï¼Œå…¶å®ƒ: debug,warn,trace</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">pidfile</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">/tmp/supervisord.pid </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">pid æ–‡ä»¶</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">nodaemon</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">false               </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">æ˜¯å¦åœ¨å‰å°å¯åŠ¨ï¼Œé»˜è®¤æ˜¯falseï¼Œå³ä»¥ daemon çš„æ–¹å¼å¯åŠ¨</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">minfds</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">1024</span><span class="token plain">                  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">å¯ä»¥æ‰“å¼€çš„æ–‡ä»¶æè¿°ç¬¦çš„æœ€å°å€¼ï¼Œé»˜è®¤ </span><span class="token number" style="color:rgb(247, 140, 108)">1024</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">minprocs</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">200</span><span class="token plain">                 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">å¯ä»¥æ‰“å¼€çš„è¿›ç¨‹æ•°çš„æœ€å°å€¼ï¼Œé»˜è®¤ </span><span class="token number" style="color:rgb(247, 140, 108)">200</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">supervisorctl</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">serverurl</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">unix:///tmp/supervisor.sock </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">é€šè¿‡UNIX socketè¿æ¥supervisordï¼Œè·¯å¾„ä¸unix_http_serveréƒ¨åˆ†çš„fileä¸€è‡´</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">serverurl</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">http://127.0.0.1:9001 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> é€šè¿‡HTTPçš„æ–¹å¼è¿æ¥supervisord</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">program:xx</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">æ˜¯è¢«ç®¡ç†çš„è¿›ç¨‹é…ç½®å‚æ•°ï¼Œxxæ˜¯è¿›ç¨‹çš„åç§°</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">program:xx</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">command</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">/opt/apache-tomcat-8.0.35/bin/catalina.sh run  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> ç¨‹åºå¯åŠ¨å‘½ä»¤</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">autostart</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">true       </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> åœ¨supervisordå¯åŠ¨çš„æ—¶å€™ä¹Ÿè‡ªåŠ¨å¯åŠ¨</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">startsecs</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token plain">         </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> å¯åŠ¨10ç§’åæ²¡æœ‰å¼‚å¸¸é€€å‡ºï¼Œå°±è¡¨ç¤ºè¿›ç¨‹æ­£å¸¸å¯åŠ¨äº†ï¼Œé»˜è®¤ä¸º1ç§’</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">autorestart</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">true     </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> ç¨‹åºé€€å‡ºåè‡ªåŠ¨é‡å¯,å¯é€‰å€¼ï¼š</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">unexpected,true,false</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">ï¼Œé»˜è®¤ä¸ºunexpectedï¼Œè¡¨ç¤ºè¿›ç¨‹æ„å¤–æ€æ­»åæ‰é‡å¯</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">startretries</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token plain">       </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> å¯åŠ¨å¤±è´¥è‡ªåŠ¨é‡è¯•æ¬¡æ•°ï¼Œé»˜è®¤æ˜¯3</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">user</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">tomcat          </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> ç”¨å“ªä¸ªç”¨æˆ·å¯åŠ¨è¿›ç¨‹ï¼Œé»˜è®¤æ˜¯root</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">priority</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">999</span><span class="token plain">         </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> è¿›ç¨‹å¯åŠ¨ä¼˜å…ˆçº§ï¼Œé»˜è®¤999ï¼Œå€¼å°çš„ä¼˜å…ˆå¯åŠ¨</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">redirect_stderr</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">true </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> æŠŠstderré‡å®šå‘åˆ°stdoutï¼Œé»˜è®¤false</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">stdout_logfile_maxbytes</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">20MB  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> stdout æ—¥å¿—æ–‡ä»¶å¤§å°ï¼Œé»˜è®¤50MB</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stdout_logfile_backups </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">20</span><span class="token plain">   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> stdout æ—¥å¿—æ–‡ä»¶å¤‡ä»½æ•°ï¼Œé»˜è®¤æ˜¯10</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> stdout æ—¥å¿—æ–‡ä»¶ï¼Œéœ€è¦æ³¨æ„å½“æŒ‡å®šç›®å½•ä¸å­˜åœ¨æ—¶æ— æ³•æ­£å¸¸å¯åŠ¨ï¼Œæ‰€ä»¥éœ€è¦æ‰‹åŠ¨åˆ›å»ºç›®å½•ï¼ˆsupervisord ä¼šè‡ªåŠ¨åˆ›å»ºæ—¥å¿—æ–‡ä»¶ï¼‰</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">stdout_logfile</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">/opt/apache-tomcat-8.0.35/logs/catalina.out</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">stopasgroup</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">false     </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">é»˜è®¤ä¸ºfalse,è¿›ç¨‹è¢«æ€æ­»æ—¶ï¼Œæ˜¯å¦å‘è¿™ä¸ªè¿›ç¨‹ç»„å‘é€stopä¿¡å·ï¼ŒåŒ…æ‹¬å­è¿›ç¨‹</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">killasgroup</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">false     </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">é»˜è®¤ä¸ºfalseï¼Œå‘è¿›ç¨‹ç»„å‘é€killä¿¡å·ï¼ŒåŒ…æ‹¬å­è¿›ç¨‹</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">åŒ…å«å…¶å®ƒé…ç½®æ–‡ä»¶</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">include</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">files </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> relative/directory/*.ini    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">å¯ä»¥æŒ‡å®šä¸€ä¸ªæˆ–å¤šä¸ªä»¥.iniç»“æŸçš„é…ç½®æ–‡ä»¶</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">å­è¿›ç¨‹é…ç½®æ–‡ä»¶è¯´æ˜ï¼š</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ç»™éœ€è¦ç®¡ç†çš„å­è¿›ç¨‹</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">ç¨‹åº</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">ç¼–å†™ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œæ”¾åœ¨/etc/supervisor.d/ç›®å½•ä¸‹ï¼Œä»¥.iniä½œä¸ºæ‰©å±•åï¼ˆæ¯ä¸ªè¿›ç¨‹çš„é…ç½®æ–‡ä»¶éƒ½å¯ä»¥å•ç‹¬åˆ†æ‹†ä¹Ÿå¯ä»¥æŠŠç›¸å…³çš„è„šæœ¬æ”¾ä¸€èµ·ï¼‰ã€‚å¦‚ä»»æ„å®šä¹‰ä¸€ä¸ªå’Œè„šæœ¬ç›¸å…³çš„é¡¹ç›®åç§°çš„é€‰é¡¹ç»„ï¼ˆ/etc/supervisord.d/test.confï¼‰ï¼š</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#é¡¹ç›®å</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">program:blog</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#è„šæœ¬ç›®å½•</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">directory</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">/opt/bin</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#è„šæœ¬æ‰§è¡Œå‘½ä»¤</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">command</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">/usr/bin/python /opt/bin/test.py</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#supervisorå¯åŠ¨çš„æ—¶å€™æ˜¯å¦éšç€åŒæ—¶å¯åŠ¨ï¼Œé»˜è®¤True</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">autostart</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#å½“ç¨‹åºexitçš„æ—¶å€™ï¼Œè¿™ä¸ªprogramä¸ä¼šè‡ªåŠ¨é‡å¯,é»˜è®¤unexpectedï¼Œè®¾ç½®å­è¿›ç¨‹æŒ‚æ‰åè‡ªåŠ¨é‡å¯çš„æƒ…å†µï¼Œæœ‰ä¸‰ä¸ªé€‰é¡¹ï¼Œfalse,unexpectedå’Œtrueã€‚å¦‚æœä¸ºfalseçš„æ—¶å€™ï¼Œæ— è®ºä»€ä¹ˆæƒ…å†µä¸‹ï¼Œéƒ½ä¸ä¼šè¢«é‡æ–°å¯åŠ¨ï¼Œå¦‚æœä¸ºunexpectedï¼Œåªæœ‰å½“è¿›ç¨‹çš„é€€å‡ºç ä¸åœ¨ä¸‹é¢çš„exitcodesé‡Œé¢å®šä¹‰çš„</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">autorestart</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">false</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#è¿™ä¸ªé€‰é¡¹æ˜¯å­è¿›ç¨‹å¯åŠ¨å¤šå°‘ç§’ä¹‹åï¼Œæ­¤æ—¶çŠ¶æ€å¦‚æœæ˜¯runningï¼Œåˆ™æˆ‘ä»¬è®¤ä¸ºå¯åŠ¨æˆåŠŸäº†ã€‚é»˜è®¤å€¼ä¸º1</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">startsecs</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#è„šæœ¬è¿è¡Œçš„ç”¨æˆ·èº«ä»½ </span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">user </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">test</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#æ—¥å¿—è¾“å‡º </span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">stderr_logfile</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">/tmp/blog_stderr.log </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">stdout_logfile</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">/tmp/blog_stdout.log </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#æŠŠstderré‡å®šå‘åˆ°stdoutï¼Œé»˜è®¤ false</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">redirect_stderr </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#stdoutæ—¥å¿—æ–‡ä»¶å¤§å°ï¼Œé»˜è®¤ 50MB</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stdout_logfile_maxbytes </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> 20MB</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#stdoutæ—¥å¿—æ–‡ä»¶å¤‡ä»½æ•°</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stdout_logfile_backups </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">20</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">å­è¿›ç¨‹é…ç½®ç¤ºä¾‹ï¼š</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#è¯´æ˜åŒä¸Š</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">program:test</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">directory</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">/opt/bin </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">command</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">/opt/bin/test</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">autostart</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">true </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">autorestart</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">false </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">stderr_logfile</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">/tmp/test_stderr.log </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">stdout_logfile</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">/tmp/test_stdout.log </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#user = test  </span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">äº”ã€supervisorå‘½ä»¤è¯´æ˜</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">å¸¸ç”¨å‘½ä»¤</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">supervisorctl status        //æŸ¥çœ‹æ‰€æœ‰è¿›ç¨‹çš„çŠ¶æ€</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">supervisorctl stop es       //åœæ­¢es</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">supervisorctl start es      //å¯åŠ¨es</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">supervisorctl restart       //é‡å¯es</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">supervisorctl update        //é…ç½®æ–‡ä»¶ä¿®æ”¹åä½¿ç”¨è¯¥å‘½ä»¤åŠ è½½æ–°çš„é…ç½®</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">supervisorctl reload        //é‡æ–°å¯åŠ¨é…ç½®ä¸­çš„æ‰€æœ‰ç¨‹åº</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>æ³¨ï¼šæŠŠesæ¢æˆallå¯ä»¥ç®¡ç†é…ç½®ä¸­çš„æ‰€æœ‰è¿›ç¨‹ã€‚ç›´æ¥è¾“å…¥supervisorctlè¿›å…¥supervisorctlçš„shelläº¤äº’ç•Œé¢ï¼Œæ­¤æ—¶ä¸Šé¢çš„å‘½ä»¤ä¸å¸¦supervisorctlå¯ç›´æ¥ä½¿ç”¨ã€‚</p><p>æ³¨æ„äº‹é¡¹
ä½¿ç”¨supervisorè¿›ç¨‹ç®¡ç†å‘½ä»¤ä¹‹å‰å…ˆå¯åŠ¨supervisordï¼Œå¦åˆ™ç¨‹åºæŠ¥é”™ã€‚
ä½¿ç”¨å‘½ä»¤supervisord -c /etc/supervisord.confå¯åŠ¨ã€‚
è‹¥æ˜¯centos7ï¼š</p><p>systemctl start supervisord.service     //å¯åŠ¨supervisorå¹¶åŠ è½½é»˜è®¤é…ç½®æ–‡ä»¶
systemctl enable supervisord.service    //å°†supervisoråŠ å…¥å¼€æœºå¯åŠ¨é¡¹
å¸¸è§é—®é¢˜
unix:///var/run/supervisor.sock no such file
é—®é¢˜æè¿°ï¼šå®‰è£…å¥½supervisoræ²¡æœ‰å¼€å¯æœåŠ¡ç›´æ¥ä½¿ç”¨supervisorctlæŠ¥çš„é”™
è§£å†³åŠæ³•ï¼šsupervisord -c /etc/supervisord.conf</p><p>commandä¸­æŒ‡å®šçš„è¿›ç¨‹å·²ç»èµ·æ¥ï¼Œä½†supervisorè¿˜ä¸æ–­é‡å¯
é—®é¢˜æè¿°ï¼šcommandä¸­å¯åŠ¨æ–¹å¼ä¸ºåå°å¯åŠ¨ï¼Œå¯¼è‡´è¯†åˆ«ä¸åˆ°pidï¼Œç„¶åä¸æ–­é‡å¯ï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯elasticsearchï¼ŒcommandæŒ‡å®šçš„æ˜¯$path/bin/elasticsearch -d
è§£å†³åŠæ³•ï¼šsupervisoræ— æ³•æ£€æµ‹åå°å¯åŠ¨è¿›ç¨‹çš„pidï¼Œè€Œsupervisoræœ¬èº«å°±æ˜¯åå°å¯åŠ¨å®ˆæŠ¤è¿›ç¨‹ï¼Œå› æ­¤ä¸ç”¨æ‹…å¿ƒè¿™ä¸ª</p><p>å¯åŠ¨äº†å¤šä¸ªsupervisordæœåŠ¡ï¼Œå¯¼è‡´æ— æ³•æ­£å¸¸å…³é—­æœåŠ¡
é—®é¢˜æè¿°ï¼šåœ¨è¿è¡Œsupervisord -c /etc/supervisord.confä¹‹å‰ï¼Œç›´æ¥è¿è¡Œè¿‡supervisord -c /etc/supervisord.d/xx.confå¯¼è‡´æœ‰äº›è¿›ç¨‹è¢«å¤šä¸ªsuperviordç®¡ç†ï¼Œæ— æ³•æ­£å¸¸å…³é—­è¿›ç¨‹ã€‚
è§£å†³åŠæ³•ï¼šä½¿ç”¨ps -fe | grep supervisordæŸ¥çœ‹æ‰€æœ‰å¯åŠ¨è¿‡çš„supervisordæœåŠ¡ï¼Œkillç›¸å…³çš„è¿›ç¨‹ã€‚</p><p>æ›´å¤šä¿¡æ¯è¯·ç§»æ­¥Supervisorå®˜ç½‘ï¼š<a href="http://supervisord.org" target="_blank" rel="noopener noreferrer">http://supervisord.org</a></p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/duyanming/duyanming.github.com/tree/main/viper/docs/12.4supervisor.mdx" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/12_3_nginx"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« 12.3 nginxé…ç½®</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/13_1_introduce"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">13.1 å¥½æ–‡ç« é›†åˆ Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#ä¸€ã€supervisorç®€ä»‹" class="table-of-contents__link">ä¸€ã€supervisorç®€ä»‹</a></li><li><a href="#äºŒã€supervisorå®‰è£…" class="table-of-contents__link">äºŒã€supervisorå®‰è£…</a></li><li><a href="#ä¸‰ã€supervisorä½¿ç”¨" class="table-of-contents__link">ä¸‰ã€supervisorä½¿ç”¨</a></li><li><a href="#å››ã€é…ç½®æ–‡ä»¶è¯´æ˜" class="table-of-contents__link">å››ã€é…ç½®æ–‡ä»¶è¯´æ˜</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">æ–‡æ¡£</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs">å…¥é—¨</a></li><li class="footer__item"><a href="http://81.69.19.225:8080/" target="_blank" rel="noopener noreferrer" class="footer__link-item">ä½“éªŒ</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">ç¤¾åŒº</h4><ul class="footer__items"><li class="footer__item"><a href="https://www.cnblogs.com/duyanming/" target="_blank" rel="noopener noreferrer" class="footer__link-item">åšå®¢</a></li><li class="footer__item"><a href="https://github.com/duyanming/Anno.Core/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">é—®é¢˜</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">æ›´å¤š</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/duyanming/Anno.Core" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://gitee.com/dotnetchina/anno.core" target="_blank" rel="noopener noreferrer" class="footer__link-item">ç äº‘</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Anno.</div></div></div></footer></div>
<script src="/styles.193400d7.js"></script>
<script src="/runtime~main.fbf2007d.js"></script>
<script src="/main.496252e8.js"></script>
<script src="/1.72bbf40f.js"></script>
<script src="/01a85c17.0d30523f.js"></script>
<script src="/1be78505.11f4e639.js"></script>
<script src="/6875c492.0528fb55.js"></script>
<script src="/a6aa9e1f.aebdbda7.js"></script>
<script src="/ccc49370.2f136fbf.js"></script>
<script src="/ece76bd1.1f60f8ce.js"></script>
<script src="/48.8b79852b.js"></script>
<script src="/47.401ce311.js"></script>
<script src="/f976f453.d6bc5f28.js"></script>
<script src="/46.ac90ee45.js"></script>
<script src="/6a5ff40f.8bfa284e.js"></script>
</body>
</html>